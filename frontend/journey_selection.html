<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Journey Details - Travel Assist</title>
<link rel="stylesheet" href="css/style.css">
<style>
.form-card { max-width:600px; margin:30px auto; background-color:rgba(255,255,255,0.95); padding:30px 25px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.15);}
.form-card h1 { color:#007BFF; margin-bottom:20px; text-align:center;}
.form-card label { display:block; margin:12px 0 6px; font-weight:bold; }
.form-card input, .form-card select { width:100%; padding:10px 12px; border-radius:6px; border:1px solid #ddd; margin-bottom:10px; outline:none; transition:all 0.3s;}
.form-card input:focus, .form-card select:focus { border-color:#007BFF; box-shadow:0 0 5px rgba(0,123,255,0.3); }
button.submit-btn { display:block; margin:20px auto 0; padding:12px 28px; font-size:16px; border-radius:8px; border:none; background-color:#007BFF; color:white; font-weight:bold; cursor:pointer; transition:all 0.3s; }
</style>
</head>
<body>
<div class="navbar"><div class="logo"><h2>TRAVEL ASSIST</h2></div></div>

<div class="form-card">
  <h1>Journey Details</h1>
  <form id="journeyForm">
    <label for="name">Full Name</label>
    <input type="text" id="name" required>

    <label for="phone">Phone Number</label>
    <input type="tel" id="phone" required>

    <label for="email">Email</label>
    <input type="email" id="email" required>

    <label for="date">Date of Travel</label>
    <input type="date" id="date" required>

    <label for="time">Time of Travel</label>
    <input type="time" id="time" required>

    <div id="flightTrainDiv">
      <label for="flightTrain">Flight/Train Number</label>
      <input type="text" id="flightTrain" required>
    </div>

    <div id="stationDiv">
      <label for="station">Airport/Station</label>
      <select id="station" required>
        <option value="">--Select--</option>
        <!-- Airports -->
        <option value="Trivandrum Airport">Trivandrum Airport</option>
        <option value="Cochin Airport">Cochin Airport</option>
        <option value="Calicut Airport">Calicut Airport</option>
        <option value="Kannur Airport">Kannur Airport</option>
        <!-- Railway Stations -->
        <option value="Trivandrum Central">Trivandrum Central</option>
        <option value="Ernakulam Junction">Ernakulam Junction</option>
        <option value="Kozhikode Railway Station">Kozhikode Railway Station</option>
        <option value="Kannur Railway Station">Kannur Railway Station</option>
      </select>
    </div>

    <button type="submit" class="submit-btn">Proceed to Bill</button>
  </form>
</div>

<div class="footer">&copy; 2025 Travel Assist</div>

<script>
(function(){
  const airportData = JSON.parse(localStorage.getItem('airportSelection'));
  const railwayData = JSON.parse(localStorage.getItem('railwaySelection'));
  const stationSelect = document.getElementById('station');
  const flightTrainLabel = document.querySelector('#flightTrainDiv label');

  if(!airportData && !railwayData){
    alert("Please select services first.");
    window.location.href = 'service_selection.html';
  }

  // adjust the station select depending on service type
  if(airportData){
    flightTrainLabel.innerText = "Flight Number";
    // keep only options containing "Airport"
    for(let i = stationSelect.options.length - 1; i >= 0; i--){
      const v = stationSelect.options[i].value;
      if(v && !v.toLowerCase().includes('airport')) stationSelect.remove(i);
    }
  } else {
    flightTrainLabel.innerText = "Train Number";
    for(let i = stationSelect.options.length - 1; i >= 0; i--){
      const v = stationSelect.options[i].value;
      if(v && (v.toLowerCase().includes('airport'))) stationSelect.remove(i);
    }
  }

  // form submission
  document.getElementById('journeyForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.trim();
    const date = document.getElementById('date').value;
    const time = document.getElementById('time').value;
    const flightTrain = document.getElementById('flightTrain').value.trim();
    const station = document.getElementById('station').value;

    if(!name || !phone || !email || !date || !time || !flightTrain || !station){
      alert('Please fill all required fields.');
      return;
    }

    const journeyDetails = {
      name, phone, email, date, time, flightTrain, station,
      services: airportData ? airportData.services : railwayData.services,
      total: airportData ? airportData.total : railwayData.total,
      type: airportData ? 'Airport' : 'Railway'
    };

    localStorage.setItem('journeyDetails', JSON.stringify(journeyDetails));
    // store payment amount
    localStorage.setItem('paymentAmount', journeyDetails.total.toString());
    window.location.href = 'bill_summary.html';
  });
})();
</script>
</body>
</html>
